/**
--------------------------------------------------------------------
âœ… Problem: Validate Binary Search Tree (LeetCode #98)

Given the root of a binary tree, determine if it is a valid **Binary Search Tree (BST)**.

A **valid BST** satisfies:
- Every node's left subtree contains only nodes with keys **less than** the node's key.
- Every node's right subtree contains only nodes with keys **greater than** the node's key.
- Both left and right subtrees must also be BSTs.

--------------------------------------------------------------------
Example:
Input:
        2
       / \
      1   3

Output: true

Explanation:
Left < Root < Right â†’ Valid BST.

--------------------------------------------------------------------
âœ… Approach: Recursive Minâ€“Max Bound Check

ðŸ’¡ **Idea:**
Use recursion with valid range `(min, max)` for each node:
- Initially: `(-âˆž, +âˆž)`
- For left child: valid range = `(min, node->val)`
- For right child: valid range = `(node->val, max)`

If at any point, `node->val` is not within `(min, max)`, it's not a BST.

--------------------------------------------------------------------
âœ… Implementation:
*/

class Solution {
public:
    bool helper(TreeNode* root, long min, long max) {
        if (root == nullptr)
            return true;

        // Node value must be strictly between min and max
        if (root->val <= min || root->val >= max)
            return false;

        // Check left and right subtrees with updated ranges
        return helper(root->left, min, root->val) &&
               helper(root->right, root->val, max);
    }

    bool isValidBST(TreeNode* root) {
        return helper(root, LONG_MIN, LONG_MAX);
    }
};

/**
--------------------------------------------------------------------
âœ… Dry Run Example:

Input:
        5
       / \
      1   4
         / \
        3   6

Step-by-step:
- Node 5: valid (âˆ’âˆž < 5 < +âˆž)
- Left 1: valid (âˆ’âˆž < 1 < 5)
- Right 4: invalid (5 < 4 < +âˆž) âŒ

Output: false

--------------------------------------------------------------------
âœ… Time Complexity:
O(N) â€” each node is visited once.

âœ… Space Complexity:
O(H) â€” recursion stack (H = height of the tree).

âœ… Concepts Used:
- Recursion
- Minâ€“Max Range Validation
--------------------------------------------------------------------
