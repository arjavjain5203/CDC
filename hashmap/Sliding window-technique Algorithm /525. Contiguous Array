/**
--------------------------------------------------------------------
âœ… Problem: Contiguous Array (LeetCode #525)

Given a binary array `nums`, find the length of the longest contiguous 
subarray with an equal number of 0s and 1s.

--------------------------------------------------------------------
ðŸ’¡ Example:
Input:  nums = [0,1,0]
Output: 2  
Explanation: The subarray [0,1] or [1,0] has equal 0s and 1s.

--------------------------------------------------------------------
âœ… Approach: Prefix Sum + HashMap

ðŸ”¹ Treat 0 as -1 and 1 as +1.  
   - Then the problem becomes finding the longest subarray with **sum = 0**.

ðŸ”¹ Maintain:
   - `sum`: running prefix sum (increment by +1 for 1, decrement by -1 for 0)
   - `map`: stores the **first index** where each `sum` value occurs.

ðŸ”¹ Logic:
   - If the same `sum` appears again, it means the subarray between those 
     indices has an equal number of 0s and 1s.
   - Keep track of the **maximum length** of such subarrays.

--------------------------------------------------------------------
âœ… Implementation:
*/

class Solution {
public:
    int findMaxLength(vector<int>& nums) {
        int n = nums.size();
        int sum = 0;                 // running prefix sum
        int maxlen = 0;              // stores max subarray length
        unordered_map<int, int> mp;  // {sum -> first index}

        for (int i = 0; i < n; i++) {
            // Treat 0 as -1 and 1 as +1
            sum += (nums[i] == 0) ? -1 : 1;

            // Case 1: entire subarray (0 to i) has sum = 0
            if (sum == 0)
                maxlen = max(maxlen, i + 1);

            // Case 2: subarray with same prefix sum seen before
            if (mp.find(sum) != mp.end()) {
                maxlen = max(maxlen, i - mp[sum]);
            } 
            // Store first occurrence of this prefix sum
            else {
                mp[sum] = i;
            }
        }

        return maxlen;
    }
};

/**
--------------------------------------------------------------------
âœ… Dry Run Example:
nums = [0,1,0,1]

i | nums[i] | sum | map         | maxlen
--|----------|-----|-------------|--------
0 |    0     | -1  | {-1:0}      | 0
1 |    1     |  0  | {-1:0}      | 2  (0â€“1)
2 |    0     | -1  | {-1:0}      | 2
3 |    1     |  0  | {-1:0}      | 4  (0â€“3)

âœ… Final Answer â†’ 4

--------------------------------------------------------------------
âœ… Time Complexity: O(n)
âœ… Space Complexity: O(n)

âœ… Key Concepts:
- Prefix Sum
- Hash Map (to track first occurrence)
- Binary Array Transformation (0 â†’ -1)
--------------------------------------------------------------------
*/
